## Item 05

### μ μ—°ν•μ§€ λ»ν• μ •μ  μ ν‹Έλ¦¬ν‹° ν΄λμ¤
λ§μ€ ν΄λμ¤λ“¤μ€ ν•λ‚ μ΄μƒμ μμ›μ— μμ΅΄ν•λ‹¤. λ΅λ λ―Έμ…μ—μ„λ” λ΅λ λ²νΈλ¥Ό λ°κΈ‰ν•κΈ° μ„ν•΄ λ΅λ λ²νΈ μƒμ„± ν΄λμ¤μ— μμ΅΄ν•λ„λ΅ κµ¬ν„ν•΄μ•Ό ν•λ‹¤κ³  νλ‹¨ν–λ‹¤.

μ•„λλ” λ΅λ λ²νΈλ¥Ό μλ™μΌλ΅ μƒμ„±ν•κΈ° μ„ν• μ •μ  μ ν‹Έλ¦¬ν‹° ν΄λμ¤μ΄λ‹¤.

```java
public class AutoLottoNumberGenerator {

    private static final List<Integer> LOTTO_TOTAL_NUMBERS = IntStream.rangeClosed(1, 45)
            .boxed()
            .collect(toList());

    private AutoLottoNumberGenerator() {
    }

    public static List<Integer> generate(int size) {
        List<Integer> lottoTotalNumbers = new ArrayList<>(LOTTO_TOTAL_NUMBERS);
        Collections.shuffle(lottoTotalNumbers);

        return lottoTotalNumbers.stream()
                .limit(size)
                .collect(toList());
    }
}
```

`Lotto` ν΄λμ¤λ” 6μλ¦¬μ λ΅λ λ²νΈ λ¦¬μ¤νΈλ¥Ό κ°€μ§„ μΌκΈ‰ μ»¬λ ‰μ…μ΄λ‹¤. `Lotto`λ¥Ό μƒμ„±ν•λ” μ‹μ μ— μ„μ—μ„ μ‘μ„±ν• μ ν‹Έλ¦¬ν‹° ν΄λμ¤λ¥Ό ν™μ©ν•μ—¬ λλ¤μΌλ΅ λ²νΈλ¥Ό μƒμ„±ν• λ’¤ ν™μ©ν•λ‹¤.

```java
public class Lotto {

    private static final int DEFAULT_LOTTO_NUMBERS_SIZE = 6;

    private final Set<LottoNumber> lottoNumbers;

    public Lotto() {
        List<Integer> numbers = AutoLottoNumberGenerator.generate(DEFAULT_LOTTO_NUMBERS_SIZE);
        this.lottoNumbers = numbers.stream()
                .map(LottoNumber::new)
                .collect(toSet());
    }

    public Set<LottoNumber> getLottoNumbers() {
        return Collections.unmodifiableSet(lottoNumbers);
    }
}
```

μ„μ κµ¬ν„μ—μ„λ” `AutoLottoNumberGenerator`μ™€ κ°™μ€ μ •μ  μ ν‹Έλ¦¬ν‹° ν΄λμ¤μ— μμ΅΄ν•κ³  μμ–΄, μ μ—°μ„±μ΄ λ–¨μ–΄μ§„λ‹¤. μμ›μ„ μ§μ ‘ λ…μ‹ν•κΈ°λ³΄λ‹¤λ” μμ΅΄ κ°μ²΄ μ£Όμ…μ„ μ‚¬μ©ν•μ—¬ λ” μ μ—°ν• μ„¤κ³„λ¥Ό ν•  μ μλ‹¤.

κ·Έλ ‡λ‹¤. μ„μ™€ κ°™μ€ λ°©λ²•μ€ μλ™ μƒμ„±μ„ μ„ν• `AutoLottoNumberGenerator`μ—λ§ μμ΅΄ν•κ³  μλ‹¤.
λ§μ•½ μ¶”κ°€ μ”κµ¬μ‚¬ν•­μΌλ΅ μλ™ λ²νΈ μ…λ ¥ κΈ°λ¥μ΄ ν•„μ”ν•΄μ§„λ‹¤λ©΄, `Lotto` ν΄λμ¤λ¥Ό μ§μ ‘ μμ •ν•΄μ•Ό ν•λ‹¤. μ΄λ” λΉ„μ¦λ‹μ¤ λ΅μ§μ ν•µμ‹¬ λ„λ©”μΈμ„ μμ •ν•΄μ•Όλ§ κΈ°λ¥μ„ λ°μν•  μ μλ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.

μ΄μ²λΌ **μ‚¬μ©ν•λ” μμ›μ— λ”°λΌ λ™μ‘μ΄ λ‹¬λΌμ§€λ” ν΄λμ¤μ—λ” μ •μ  μ ν‹Έλ¦¬ν‹° ν΄λμ¤λ‚ μ‹±κΈ€ν„΄ λ°©μ‹μ΄ μ ν•©ν•μ§€ μ•λ‹¤.**

`Lotto` ν΄λμ¤λ” λ‹¤μ–‘ν• λ΅λ μƒμ„± μ „λµμ„ μ±„νƒν•  μ μμ–΄μ•Ό ν•λ‹¤. μ΄λ¥Ό μ„ν•΄ μƒμ„±μμ— ν•„μ”ν• μμ›μ„ μ „λ‹¬ν•λ” λ°©μ‹μΌλ΅ μ„¤κ³„λ¥Ό λ³€κ²½ν•΄μ•Ό ν•λ‹¤. μ΄λ¬ν• μ ‘κ·Όμ€ μ½”λ“μ μ μ—°μ„±μ„ λ†’μ΄κ³ , λ³€ν™”μ— λ³΄λ‹¤ μ λ€μ‘ν•  μ μλ„λ΅ ν•λ‹¤.

### μμ΅΄ κ°μ²΄ μ£Όμ…
μ΄λ²μ—λ” μƒμ„±μλ¥Ό ν†µν•΄ μμ΅΄ κ°μ²΄λ¥Ό μ£Όμ…ν•λ” λ°©μ‹μΌλ΅ μμ λ¥Ό λ³€κ²½ν•μ€λ‹¤. λ¨Όμ €, λ²νΈ μƒμ„± μ „λµμ„ μ •μν•κΈ° μ„ν•΄ `LottoNumberGenerator`λΌλ” μΈν„°νμ΄μ¤λ¥Ό μ‘μ„±ν•λ‹¤.

```java
@FunctionalInterface
public interface LottoNumberGenerator {
    List<Integer> generate(int size);
}
```

μ΄ μΈν„°νμ΄μ¤λ” λ‹¨ ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ§μ„ κ°€μ§€λ―€λ΅, `ν•¨μν• μΈν„°νμ΄μ¤`λ΅ ν™μ©ν•  μ μλ‹¤. λ‹¤μμΌλ΅, μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ—¬ μλ™ λ²νΈ μƒμ„±μ„ μν–‰ν•λ” ν΄λμ¤λ¥Ό λ§λ“ λ‹¤.

π“ ν•¨μν• μΈν„°νμ΄μ¤?

`ν•¨μν• μΈν„°νμ΄μ¤(functional interface)`λ” **μ¶”μƒλ©”μ„λ“κ°€ 1κ°λ§ μ •μλ μΈν„°νμ΄μ¤**λ¥Ό ν†µμΉ­ν•μ—¬ μΌμ»«λ”λ‹¤. μ΄ μΈν„°νμ΄μ¤ ν•νƒμ λ©μ μ€ μλ°”μ—μ„ λλ‹¤ ν‘ν„μ‹(Lambda Expression)μ„ μ΄μ©ν•΄ ν•¨μν• ν”„λ΅κ·Έλλ°μ„ κµ¬ν„ν•κΈ° μ„ν•΄μ„ μ΄λ‹¤.

```java
// @FunctionalInterface μ–΄λ…Έν…μ΄μ…μ„ μΈν„°νμ΄μ¤μ— λ¶™μ—¬μ£Όλ©΄,
// λ‘ κ° μ΄μƒμ λ©”μ†λ“ μ„ μ–Έ μ‹ μ»΄νμΌ μ¤λ¥λ¥Ό λ°μƒμ‹μΌ κ°λ°μμ μ‹¤μλ¥Ό μ¤„μΌ μ μλ‹¤.
@FunctionalInterface
    public interface Animal {
    public void method();
}
```

```java
public class AutoLottoNumberGenerator implements LottoNumberGenerator {
    private static final int START_INCLUSIVE = 1;
    private static final int END_INCLUSIVE = 45;
    private static final List<Integer> LOTTO_TOTAL_NUMBERS = IntStream.rangeClosed(START_INCLUSIVE, END_INCLUSIVE)
            .boxed()
            .collect(toList());

    @Override
    public List<Integer> generate(int size) {
        List<Integer> lottoTotalNumbers = new ArrayList<>(LOTTO_TOTAL_NUMBERS);
        Collections.shuffle(lottoTotalNumbers);

        return lottoTotalNumbers.stream()
                .limit(size)
                .collect(toList());
    }
}
```

μ΄μ „ κµ¬ν„κ³Ό μ μ‚¬ν• λ¶€λ¶„μ΄ λ§μ§€λ§, λ” μ΄μƒ μ •μ  λ©”μ„λ“λ¥Ό νΈμ¶ν•μ§€ μ•λ”λ‹¤. λ€μ‹ , `Lotto` ν΄λμ¤λ” μƒμ„± μ‹μ μ— λ²νΈ μƒμ„± μ „λµμ„ μ£Όμ…λ°›λ„λ΅ μ„¤κ³„λμ—λ‹¤.

```java
public class Lotto {
    private static final int DEFAULT_LOTTO_NUMBERS_SIZE = 6;
    private final Set<LottoNumber> lottoNumbers;

    public Lotto(LottoNumberGenerator lottoNumberGenerator) {
        List<Integer> numbers = lottoNumberGenerator.generate(DEFAULT_LOTTO_NUMBERS_SIZE);
        this.lottoNumbers = numbers.stream()
                .map(LottoNumber::new)
                .collect(toSet());
    }

    public Set<LottoNumber> getLottoNumbers() {
        return Collections.unmodifiableSet(lottoNumbers);
    }
}
```

μ΄λ¬ν• μ„¤κ³„λ” μμ΅΄ κ°μ²΄ μ£Όμ…μ„ ν†µν•΄ λ‹¤μ–‘ν• λ΅λ λ²νΈ μƒμ„± μ „λµμ„ μ†μ‰½κ² μ¶”κ°€ν•κ³ , κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•κ³ λ„ λ³€κ²½ν•  μ μλ„λ΅ ν•΄μ¤€λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ½”λ“μ μ μ—°μ„±κ³Ό μ¬μ‚¬μ©μ„±μ΄ ν¬κ² ν–¥μƒλλ‹¤.

### μμ΅΄ κ°μ²΄ μ£Όμ… ν¨ν„΄μ μ¥μ 

1. μμ΅΄ κ°μ²΄ μ£Όμ… ν¨ν„΄μ μ΄μ 
    - κ°μ²΄μ— μ μ—°μ„± λ¶€μ—¬
    - ν…μ¤νΈ μ©μ΄μ„± κ°μ„ 

2. κΈ°μ΅΄ μ½”λ“μ λ¬Έμ μ 
    - μ ν‹Έλ¦¬ν‹° ν΄λμ¤μ— μμ΅΄ν•λ” μ½”λ“λ” λλ¤ λ΅λ λ²νΈλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•¨
    - μ΄λ΅ μΈν•΄ μ •ν™•ν• ν…μ¤νΈκ°€ μ–΄λ ¤μ›€

3. λ¬Έμ κ°€ μλ” ν…μ¤νΈ μ½”λ“ μμ‹
   ```java
   class LottoTest {
       @DisplayName("μλ™μΌλ΅ λ΅λ λ²νΈλ¥Ό λ°κΈ‰ λ°›λ”λ‹¤.")
       @Test
       void μλ™_λ΅λ_λ²νΈ_λ°κΈ‰() {
           assertThat(new Lotto().getLottoNumbers())
                   .isNotIn(new LottoNumber(0), new LottoNumber(46));
       }
   }
   ```
    - μ΄ ν…μ¤νΈλ” λ‹¨μν λ²”μ„ μ²΄ν¬λ§ κ°€λ¥ν•λ©°, μ •ν™•ν• λ²νΈ κ²€μ¦μ΄ λ¶κ°€λ¥ν•λ‹¤.

4. μμ΅΄ κ°μ²΄ μ£Όμ… ν¨ν„΄ μ μ©
    - λ΅λ λ²νΈ μƒμ„± μ „λµμ„ μ™Έλ¶€μ—μ„ μ£Όμ…
    - ν…μ¤νΈμ μ μ—°μ„± μ¦κ°€

5. κ°μ„ λ ν…μ¤νΈ μ½”λ“ μμ‹:
   ```java
   class LottoTest {
       @DisplayName("μλ™μΌλ΅ λ΅λ λ²νΈλ¥Ό μƒμ„±ν•λ‹¤.")
       @Test
       void μλ™_λ΅λ_λ²νΈ_μƒμ„±() {
           List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6);
           LottoNumberGenerator lottoNumberGenerator = (size) -> numbers;
           
           Lotto lotto = new Lotto(lottoNumberGenerator);
           
           assertThat(lotto.getLottoNumbers())
                   .contains(new LottoNumber(1),
                           new LottoNumber(2),
                           new LottoNumber(3),
                           new LottoNumber(4),
                           new LottoNumber(5),
                           new LottoNumber(6));
       }
   }
   ```

6. κ°μ„ λ λ°©μ‹μ μ¥μ 
    - νΉμ • μƒν™©(μ: 1λ“± λ‹Ήμ²¨)μ— λ€ν• ν…μ¤νΈ κ°€λ¥
    - μ™Έλ¶€μ—μ„ μ„μμ λ²νΈλ¥Ό μ£Όμ…ν•μ—¬ λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ κ°€λ¥
    - μ „λ°μ μΈ ν…μ¤νΈμ μ μ—°μ„± ν–¥μƒ

π“ **κ²°λ΅ **: μμ΅΄ κ°μ²΄ μ£Όμ… ν¨ν„΄μ„ ν†µν•΄ λ΅λ λ²νΈ μƒμ„± λ΅μ§μ„ μ™Έλ¶€μ—μ„ μ£Όμ…ν•¨μΌλ΅μ¨, ν…μ¤νΈμ μ •ν™•μ„±κ³Ό μ μ—°μ„±μ„ ν¬κ² κ°μ„ ν•  μ μλ‹¤. μ΄λ” νΉν νΉμ • μ΅°κ±΄μ΄λ‚ μ‹λ‚λ¦¬μ¤λ¥Ό ν…μ¤νΈν•΄μ•Ό ν•λ” κ²½μ°μ— λ§¤μ° μ μ©ν•λ‹¤.

νΉμ‹λΌλ„ ν•΄λ‹Ή ν…μ¤νΈμ½”λ“κ°€ μ™ λ” μ μ—°ν• μ½”λ“μΈμ§€ μλ¬Έμ΄μ‹  λ¶„λ“¤μ€ ν•΄λ‹Ή μμ‹λ¥Ό λ³΄λ©΄ μ΄ν•΄κ°€ λ κ²ƒκ°™μµλ‹λ‹¤.

```java
LottoNumberGenerator lottoNumberGenerator = (size) -> numbers;
```
`LottoNumberGenerator` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” λλ‹¤ ν‘ν„μ‹μ„ μ‚¬μ©ν•μ—¬ lottoNumberGeneratorλ¥Ό μ •μν•λ‹¤.
μ΄ λλ‹¤ ν‘ν„μ‹μ€ sizeλ¥Ό μ…λ ¥μΌλ΅ λ°›μ•„ numbers λ¦¬μ¤νΈλ¥Ό λ°ν™ν•λ‹¤.
**μ£Όμν•  μ μ€ sizeμ κ°’μ— μƒκ΄€μ—†μ΄ ν•­μƒ κ°™μ€ λ¦¬μ¤νΈλ¥Ό λ°ν™**ν•λ‹¤λ” κ²ƒμ΄λ‹¤.

μ¦‰, **μμ΅΄ κ°μ²΄ μ£Όμ…μ„ ν†µν•΄ λ΅λ λ²νΈ μƒμ„± μ „λµμ„ μ™Έλ¶€μ—μ„ μ£Όμ…**ν•¨μΌλ΅μ¨, ν…μ¤νΈ μ‹μ— μ›ν•λ” λ²νΈλ¥Ό μ§μ ‘ μ„¤μ •ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.



